

# Socket Server with Threading

โปรเจกต์นี้แสดงการสื่อสารระหว่างเซิร์ฟเวอร์และไคลเอนต์โดยใช้ Socket ในภาษา Python โดยใช้ **Threading** เพื่อให้เซิร์ฟเวอร์สามารถจัดการการเชื่อมต่อจากหลายไคลเอนต์ได้ในเวลาเดียวกัน เซิร์ฟเวอร์จะคำนวณเลข Fibonacci ตามคำขอของไคลเอนต์
# สารบัญ
1. [รายชื่อไฟล์](#%E0%B8%A3%E0%B8%B2%E0%B8%A2%E0%B8%8A%E0%B8%B7%E0%B9%88%E0%B8%AD%E0%B9%84%E0%B8%9F%E0%B8%A5%E0%B9%8C)
2. [การทำงานของโค้ด](#%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%97%E0%B8%B3%E0%B8%87%E0%B8%B2%E0%B8%99%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B9%82%E0%B8%84%E0%B9%89%E0%B8%94)
3. [วิธีการใช้งานเซิร์ฟเวอร์](#%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%B5%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B9%83%E0%B8%8A%E0%B9%89%E0%B8%87%E0%B8%B2%E0%B8%99%E0%B9%80%E0%B8%8B%E0%B8%B4%E0%B8%A3%E0%B9%8C%E0%B8%9F%E0%B9%80%E0%B8%A7%E0%B8%AD%E0%B8%A3%E0%B9%8C)
4. [สรุป](#%E0%B8%AA%E0%B8%A3%E0%B8%B8%E0%B8%9B)

## รายชื่อไฟล์

1.  **`server.py`**: การทำงานของเซิร์ฟเวอร์ที่รับการเชื่อมต่อจากไคลเอนต์และจัดการคำขอทีละคำขอ
2.  **`server_with_threads.py`**: การทำงานของเซิร์ฟเวอร์ที่ใช้ **Threading** เพื่อจัดการไคลเอนต์หลายๆ ตัวในเวลาเดียวกัน
3.  **`perf1.py`**: สคริปต์ที่ใช้วัด **เวลาในการตอบกลับ** ของเซิร์ฟเวอร์
4.  **`perf2.py`**: สคริปต์ที่ใช้วัด **จำนวนคำขอที่เซิร์ฟเวอร์สามารถประมวลผลได้ต่อวินาที** (req/sec)

## การทำงานของโค้ด

### 1. `server.py`

-   ฟังก์ชัน `fib_server()` จะรอรับการเชื่อมต่อที่พอร์ต 25000
-   เมื่อไคลเอนต์เชื่อมต่อเข้ามา เซิร์ฟเวอร์จะรับคำขอและคำนวณผลลัพธ์ของเลข Fibonacci ให้กับไคลเอนต์
-   เซิร์ฟเวอร์จะรับคำขอและส่งผลลัพธ์กลับจนกว่าไคลเอนต์จะตัดการเชื่อมต่อ

### 2. `server_with_threads.py`

-   ต่างจาก `server.py` ตรงที่ใช้ **Threading** เพื่อให้เซิร์ฟเวอร์สามารถจัดการไคลเอนต์หลายๆ ตัวได้ในเวลาเดียวกัน
-   เมื่อไคลเอนต์เชื่อมต่อเข้ามา เซิร์ฟเวอร์จะสร้าง **Thread ใหม่** เพื่อจัดการคำขอจากไคลเอนต์นั้นๆ (`Thread(target=fib_handler, args=(client,))`), ซึ่งทำให้เซิร์ฟเวอร์สามารถจัดการไคลเอนต์อื่นๆ ได้ในเวลาเดียวกัน
-   การใช้ **Threading** ช่วยให้เซิร์ฟเวอร์มีประสิทธิภาพมากขึ้นและรองรับการเชื่อมต่อจากหลายไคลเอนต์ได้ดีขึ้น

### 3. `perf1.py`

-   สคริปต์นี้ถูกออกแบบมาเพื่อวัด **เวลาในการตอบกลับ** ของเซิร์ฟเวอร์
-   สคริปต์จะส่งคำขอ (`b"30"`) ไปยังเซิร์ฟเวอร์และวัดเวลาที่ใช้ในการรับการตอบกลับจากเซิร์ฟเวอร์
-   สคริปต์นี้ช่วยในการทดสอบประสิทธิภาพของเซิร์ฟเวอร์ในแง่ของเวลาในการตอบกลับ

### 4. `perf2.py`

-   สคริปต์นี้จะวัด **จำนวนคำขอที่เซิร์ฟเวอร์สามารถประมวลผลได้ต่อวินาที** (req/sec)
-   โดยจะส่งคำขอไปยังเซิร์ฟเวอร์อย่างต่อเนื่องและใช้ **Threading** ในการส่งคำขอหลายๆ คำขอพร้อมกัน
-   สคริปต์นี้ช่วยในการทดสอบประสิทธิภาพของเซิร์ฟเวอร์ในแง่ของการประมวลผลคำขอจำนวนมาก
## วิธีการใช้งานเซิร์ฟเวอร์

1.  **เริ่มต้นเซิร์ฟเวอร์**:
    
 - สามารถเริ่มต้นเซิร์ฟเวอร์โดยใช้คำสั่งนี้ในเทอร์มินัล(แบบจัดการคำขอทีละคำขอ):
```bash
python server.py
```
หรือ 
   -    สามารถเริ่มต้นเซิร์ฟเวอร์โดยใช้คำสั่งนี้ในเทอร์มินัล(แบบจัดการหลายๆคำขอ):
```bash
python server_with_threads.py
```
2. **ทดสอบเซิร์ฟเวอร์**:

-   ใช้ `perf1.py` หรือ `perf2.py` ในการทดสอบเซิร์ฟเวอร์ โดยรันคำสั่งนี้:
```bash
python perf1.py
python perf2.py
```
- สคริปต์เหล่านี้จะส่งคำขอไปยังเซิร์ฟเวอร์และวัดผลตอบกลับหรือจำนวนคำขอต่อวินาที
## สรุป

โปรเจกต์นี้แสดงการใช้โปรแกรม Socket ใน Python ร่วมกับ **Threading** เพื่อสร้างเซิร์ฟเวอร์ที่สามารถจัดการไคลเอนต์หลายๆ ตัวพร้อมกันได้ รวมถึงการวัดประสิทธิภาพของเซิร์ฟเวอร์โดยใช้สคริปต์ไคลเอนต์ในการทดสอบเวลาและจำนวนคำขอต่อวินาที

[กลับสู่ด้านบน](#socket-server-with-threading)
